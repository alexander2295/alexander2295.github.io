<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Eventos GA4 olva </title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PBZY0KMFNH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PBZY0KMFNH');
  </script>

  <style>
    body { font-family: sans-serif; margin: 30px; }
    input, button { padding: 10px; margin: 5px 0; }
    #form_pagar, #confirmar_retiro {
      display: none;
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 10px;
      background: #f9f9f9;
    }
  </style>
</head>
<body>

  <h1>Simulador de Eventos con Google Analytics</h1>

  <!-- Establecer cliente -->
  <label for="cliente_id">ID del Cliente:</label><br>
  <input type="text" id="cliente_id" placeholder="Ej: cliente_001"><br>
  <button onclick="establecerCliente()">Establecer Cliente1</button>
  <p id="estado"></p>

  <!-- Botones de acciones -->
  <h2>Acciones</h2>
  <button onclick="mostrarFormulario()">Mostrar formulario de pago</button>
  <button onclick="mostrarConfirmacion()">Mostrar confirmación de retiro</button>

  <!-- Formulario de pago -->
  <div id="form_pagar">
    <h3>Formulario de Pago</h3>
    <button onclick="enviarEvento('pago_realizado')">Pagar</button>
  </div>

  <!-- Confirmación de retiro -->
  <div id="confirmar_retiro">
    <h3>Confirmación de Retiro</h3>
    <button onclick="enviarEvento('retiro_confirmado')">Confirmar Retiro</button>
  </div>

  <script>
    let cliente = '';

    function establecerCliente() {
      cliente = document.getElementById('cliente_id').value.trim();
      if (cliente) {
        document.getElementById('estado').innerText = "Cliente establecido: " + cliente;
        gtag('set', { user_id: cliente });
      } else {
        document.getElementById('estado').innerText = "Por favor ingresa un ID válido.";
      }
    }

    function mostrarFormulario() {
      document.getElementById('form_pagar').style.display = 'block';
      enviarEvento('formulario_pago_mostrado');
    }

    function mostrarConfirmacion() {
      document.getElementById('confirmar_retiro').style.display = 'block';
      enviarEvento('confirmacion_retiro_mostrada');
    }

    function enviarEvento(nombreEvento) {
      gtag('event', nombreEvento, {
        user_id: cliente || 'anónimo',
        event_category: 'Simulador',
        event_label: nombreEvento
      });
      console.log(`Evento enviado: ${nombreEvento}`);
    }
  </script>

</body>
</html>
